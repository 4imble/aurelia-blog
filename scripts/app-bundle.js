define("app",["exports","aurelia-dependency-injection","./shared/services/userservice"],function(e,t,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;e.App=(0,t.inject)(i.UserService)(r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.message="Hello World!",this.userService=t}return e.prototype.configureRouter=function(e,t){e.title="Conduit",e.map([{route:["","home"],moduleId:"components/home/homecomponent",name:"home",title:"Home"},{route:["login"],moduleId:"components/auth/authcomponent",name:"login",title:"Sign in"},{route:["register"],moduleId:"components/auth/authcomponent",name:"register",title:"Sign up"},{route:["settings"],moduleId:"components/settings/settingscomponent",name:"settings",title:"Settings"},{route:[":name"],moduleId:"components/profile/profilecomponent",name:"profile",title:"Profile"},{route:["editor/:slug?"],moduleId:"components/editor/editorcomponent",name:"editor",title:"Editor"},{route:["article/:slug"],moduleId:"components/article/articlecomponent",name:"article",title:"article"}]),this.router=t},e.prototype.attached=function(){this.userService.populate()},e}())||r}),define("environment",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={debug:!1,testing:!1}}),define("main",["exports","./environment"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.configure=function(e){e.use.standardConfiguration().feature("resources").feature("shared").plugin("aurelia-validation"),r.default.debug&&e.use.developmentLogging();r.default.testing&&e.use.plugin("aurelia-testing");e.start().then(function(){return e.setRoot()})};var i,r=(i=t)&&i.__esModule?i:{default:i}}),define("resources/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.configure=function(e){e.globalResources(["./value-converters/date"])}}),define("shared/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.configure=function(e){}}),define("components/article/articlecomponent",["exports","aurelia-framework","aurelia-router","../../shared/services/articleservice","../../shared/services/commentservice","../../shared/services/userservice","../../shared/state/sharedstate","../../shared/services/profileservice"],function(e,t,i,r,n,o,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArticleComponent=void 0;var l,c,u,d,f=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var p,h,m,v,g,b;e.ArticleComponent=(l=(0,t.inject)(r.ArticleService,n.CommentService,o.UserService,a.SharedState,s.ProfileService,i.Router),c=(0,t.computedFrom)("article.author.username"),l((d=function(){function e(t,i,r,n,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.articleService=t,this.commentService=i,this.userService=r,this.sharedState=n,this.profileService=o,this.router=a}return e.prototype.activate=function(e,t){var i=this;return this.routeConfig=t,this.slug=e.slug,this.articleService.get(this.slug).then(function(e){i.article=e,i.commentService.getList(i.slug).then(function(e){return i.comments=e})})},e.prototype.onToggleFavorited=function(){this.article.favorited=!this.article.favorited,this.article.favorited?(this.article.favoritesCount++,this.articleService.favorite(this.slug)):(this.article.favoritesCount--,this.articleService.unfavorite(this.slug))},e.prototype.onToggleFollowing=function(){this.article.author.following=!this.article.author.following,this.article.author.following?this.profileService.follow(this.article.author.username):this.profileService.unfollow(this.article.author.username)},e.prototype.postComment=function(){var e=this;return this.commentService.add(this.slug,this.myComment).then(function(t){e.comments.push(t),e.myComment=""})},e.prototype.deleteArticle=function(){var e=this;this.articleService.destroy(this.article.slug).then(function(){return e.router.navigateToRoute("home")})},e.prototype.deleteComment=function(e){var t=this;this.commentService.destroy(e,this.slug).then(function(){t.commentService.getList(t.slug).then(function(e){return t.comments=e})})},f(e,[{key:"canModify",get:function(){return this.article.author.username===this.sharedState.currentUser.username}}]),e}(),p=d.prototype,h="canModify",m=[c],v=Object.getOwnPropertyDescriptor(d.prototype,"canModify"),g=d.prototype,b={},Object.keys(v).forEach(function(e){b[e]=v[e]}),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=m.slice().reverse().reduce(function(e,t){return t(p,h,e)||e},b),g&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(g):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(p,h,b),b=null),u=d))||u)}),define("components/article/comment",["exports","aurelia-framework","../../shared/state/sharedstate"],function(e,t,i){"use strict";function r(e,t,i,r){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}Object.defineProperty(e,"__esModule",{value:!0}),e.CommentCustomElement=void 0;var n,o,a,s,l,c,u=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function d(e,t,i,r,n){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,r){return r(e,t,i)||i},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}e.CommentCustomElement=(n=(0,t.inject)(i.SharedState),o=(0,t.computedFrom)("comment.author.username"),n((s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"comment",l,this),r(this,"deleteCb",c,this),this.sharedState=t}return u(e,[{key:"canModify",get:function(){return this.comment.author.username===this.sharedState.currentUser.username}}]),e}(),l=d(s.prototype,"comment",[t.bindable],{enumerable:!0,initializer:null}),c=d(s.prototype,"deleteCb",[t.bindable],{enumerable:!0,initializer:null}),d(s.prototype,"canModify",[o],Object.getOwnPropertyDescriptor(s.prototype,"canModify"),s.prototype),a=s))||a)}),define("components/auth/authcomponent",["exports","aurelia-dependency-injection","aurelia-router","aurelia-validation","../../shared/services/userservice","../../shared/state/sharedstate"],function(e,t,i,r,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuthComponent=void 0;var a,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();e.AuthComponent=(0,t.inject)(n.UserService,o.SharedState,i.Router,r.ValidationControllerFactory)(a=function(){function e(t,i,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="",this.username="",this.email="",this.password="",this.errors=null,this.userService=t,this.sharedState=i,this.router=n,this.controller=o.createForCurrentScope(),r.ValidationRules.ensure("email").required().email().ensure("password").required().minLength(8).ensure("username").required().when(function(e){return"register"===e.type}).on(this)}return e.prototype.determineActivationStrategy=function(){return i.activationStrategy.replace},e.prototype.activate=function(e,t){this.type=t.name},e.prototype.submit=function(){var e=this;this.errors=null,this.controller.validate().then(function(t){if(t.valid){var i={username:e.username,email:e.email,password:e.password};e.userService.attemptAuth(e.type,i).then(function(t){return e.router.navigateToRoute("home")}).catch(function(t){t.then(function(t){return e.errors=t.errors})})}})},s(e,[{key:"canSave",get:function(){return"login"===this.type?""!==this.email&&""!==this.password:""!==this.username&&""!==this.email&&""!==this.password}}]),e}())||a}),define("components/editor/editorcomponent",["exports","aurelia-framework","aurelia-router","../../shared/services/articleservice"],function(e,t,i,r){"use strict";var n,o,a,s,l;Object.defineProperty(e,"__esModule",{value:!0}),e.EditorComponent=void 0;var c,u,d,f,p,h;e.EditorComponent=(n=(0,t.inject)(r.ArticleService,i.Router),o=(0,t.observable)(),n((s=function(){function e(t,i){var r,n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,n="tag",a=this,(o=l)&&Object.defineProperty(r,n,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this.articleService=t,this.router=i}return e.prototype.activate=function(e,t){var i=this;return this.routeConfig=t,this.slug=e.slug,this.slug?this.articleService.get(this.slug).then(function(e){i.article=e}):(this.article={title:"",description:"",body:"",tagList:[]},null)},e.prototype.tagChanged=function(e,t){void 0!==e&&""!==e&&this.addTag(this.tag)},e.prototype.addTag=function(e){this.article.tagList.push(e)},e.prototype.removeTag=function(e){this.article.tagList.splice(this.article.tagList.indexOf(e),1)},e.prototype.publishArticle=function(){var e=this;this.articleService.save(this.article).then(function(t){e.slug=t.slug,e.router.navigateToRoute("article",{slug:e.slug})})},e}(),c=s.prototype,u="tag",d=[o],f={enumerable:!0,initializer:null},h={},Object.keys(f).forEach(function(e){h[e]=f[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=d.slice().reverse().reduce(function(e,t){return t(c,u,e)||e},h),p&&void 0!==h.initializer&&(h.value=h.initializer?h.initializer.call(p):void 0,h.initializer=void 0),void 0===h.initializer&&(Object.defineProperty(c,u,h),h=null),l=h,a=s))||a)}),define("components/home/homecomponent",["exports","aurelia-framework","aurelia-dependency-injection","../../shared/state/sharedstate","../../shared/services/articleservice","../../shared/services/tagservice"],function(e,t,i,r,n,o){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.HomeComponent=void 0;e.HomeComponent=(0,i.inject)(r.SharedState,t.BindingEngine,n.ArticleService,o.TagService)(a=function(){function e(t,i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.articles=[],this.shownList="all",this.tags=[],this.filterTag=void 0,this.currentPage=1,this.limit=10,this.sharedState=t,this.bindingEngine=i,this.articleService=r,this.tagService=n}return e.prototype.bind=function(){this.subscription=this.bindingEngine.propertyObserver(this.sharedState,"isAuthenticated").subscribe(function(e,t){console.log("homeComponent isAuthenticated: ",e)})},e.prototype.unbind=function(){this.subscription.dispose()},e.prototype.attached=function(){this.getArticles(),this.getTags()},e.prototype.getArticles=function(){var e=this,t={limit:this.limit,offset:this.limit*(this.currentPage-1)};void 0!==this.filterTag&&(t.tag=this.filterTag),this.articleService.getList(this.shownList,t).then(function(t){var i;e.articles.splice(0),(i=e.articles).push.apply(i,t.articles),e.totalPages=Array.from(new Array(Math.ceil(t.articlesCount/e.limit)),function(e,t){return t+1})})},e.prototype.getTags=function(){var e=this;this.tagService.getList().then(function(t){var i;e.tags.splice(0),(i=e.tags).push.apply(i,t)})},e.prototype.setListTo=function(e,t){("feed"!==e||this.sharedState.isAuthenticated)&&(this.shownList=e,this.filterTag=t,this.getArticles())},e.prototype.getFeedLinkClass=function(){var e="";return this.sharedState.isAuthenticated||(e+=" disabled"),"feed"===this.shownList&&(e+=" active"),e},e.prototype.setPageTo=function(e){this.currentPage=e,this.getArticles()},e}())||a}),define("components/profile/profilearticlecomponent",["exports","aurelia-dependency-injection","../../shared/services/articleservice"],function(e,t,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileArticleComponent=void 0;e.ProfileArticleComponent=(0,t.inject)(i.ArticleService)(r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.articles=[],this.currentPage=1,this.limit=10,this.articleService=t}return e.prototype.activate=function(e,t){return this.username=e.name,this.getArticles()},e.prototype.getArticles=function(){var e=this,t={limit:this.limit,offset:this.limit*(this.currentPage-1),author:this.username};return this.articleService.getList("all",t).then(function(t){var i;e.articles.splice(0),(i=e.articles).push.apply(i,t.articles),e.totalPages=Array.from(new Array(Math.ceil(t.articlesCount/e.limit)),function(e,t){return t+1})})},e.prototype.setPageTo=function(e){this.currentPage=e,this.getArticles()},e}())||r}),define("components/profile/profilecomponent",["exports","aurelia-dependency-injection","aurelia-framework","../../shared/state/sharedstate","../../shared/services/userservice","../../shared/services/profileservice"],function(e,t,i,r,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileComponent=void 0;var a,s,l,c,u=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var d,f,p,h,m,v;e.ProfileComponent=(a=(0,t.inject)(r.SharedState,o.ProfileService),s=(0,i.computedFrom)("sharedState.currentUser.username"),a((c=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sharedState=t,this.profileService=i}return e.prototype.configureRouter=function(e,t){e.map([{route:[""],moduleId:"components/profile/profilearticlecomponent",name:"profilearticle",title:"Profile"},{route:["favorites"],moduleId:"components/profile/profilefavoritescomponent",name:"profilefavorites",title:"Profile"}]),this.router=t},e.prototype.activate=function(e,t){var i=this;return this.username=e.name,this.profileService.get(this.username).then(function(e){return i.profile=e})},e.prototype.onToggleFollowing=function(){this.profile.following=!this.profile.following,this.profile.following?this.profileService.follow(this.profile.username):this.profileService.unfollow(this.profile.username)},u(e,[{key:"isUser",get:function(){return this.profile.username===this.sharedState.currentUser.username}}]),e}(),d=c.prototype,f="isUser",p=[s],h=Object.getOwnPropertyDescriptor(c.prototype,"isUser"),m=c.prototype,v={},Object.keys(h).forEach(function(e){v[e]=h[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=p.slice().reverse().reduce(function(e,t){return t(d,f,e)||e},v),m&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(m):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,f,v),v=null),l=c))||l)}),define("components/profile/profilefavoritescomponent",["exports","aurelia-dependency-injection","../../shared/services/articleservice"],function(e,t,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileFavoritesComponent=void 0;e.ProfileFavoritesComponent=(0,t.inject)(i.ArticleService)(r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.articles=[],this.currentPage=1,this.limit=10,this.articleService=t}return e.prototype.activate=function(e,t){return this.username=e.name,this.getArticles()},e.prototype.getArticles=function(){var e=this,t={limit:this.limit,offset:this.limit*(this.currentPage-1),favorited:this.username};return this.articleService.getList("all",t).then(function(t){var i;e.articles.splice(0),(i=e.articles).push.apply(i,t.articles),e.totalPages=Array.from(new Array(Math.ceil(t.articlesCount/e.limit)),function(e,t){return t+1})})},e.prototype.setPageTo=function(e){this.currentPage=e,this.getArticles()},e}())||r}),define("components/settings/settingscomponent",["exports","aurelia-dependency-injection","aurelia-router","../../shared/services/userservice","../../shared/state/sharedstate"],function(e,t,i,r,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.SettingsComponent=void 0;e.SettingsComponent=(0,t.inject)(r.UserService,n.SharedState,i.Router)(o=function(){function e(t,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userService=t,this.sharedState=i,this.router=r}return e.prototype.update=function(){this.userService.update(this.sharedState.currentUser)},e.prototype.logout=function(){this.userService.purgeAuth(),this.router.navigateToRoute("home")},e}())||o}),define("resources/elements/articlelist",["exports","aurelia-framework"],function(e,t){"use strict";function i(e,t,i,r){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function r(e,t,i,r,n){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,r){return r(e,t,i)||i},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var n,o,a,s,l,c;Object.defineProperty(e,"__esModule",{value:!0}),e.ArticleList=void 0;e.ArticleList=(o=r((n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"articles",o,this),i(this,"pageNumber",a,this),i(this,"totalPages",s,this),i(this,"currentPage",l,this),i(this,"setPageCb",c,this)}).prototype,"articles",[t.bindable],{enumerable:!0,initializer:null}),a=r(n.prototype,"pageNumber",[t.bindable],{enumerable:!0,initializer:null}),s=r(n.prototype,"totalPages",[t.bindable],{enumerable:!0,initializer:null}),l=r(n.prototype,"currentPage",[t.bindable],{enumerable:!0,initializer:null}),c=r(n.prototype,"setPageCb",[t.bindable],{enumerable:!0,initializer:null}),n)}),define("resources/elements/articlepreview",["exports","aurelia-framework"],function(e,t){"use strict";var i,r;Object.defineProperty(e,"__esModule",{value:!0}),e.ArticlePreview=void 0;var n,o,a,s,l,c;e.ArticlePreview=(n=(i=function e(){var t,i,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,i="article",o=this,(n=r)&&Object.defineProperty(t,i,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}).prototype,o="article",a=[t.bindable],s={enumerable:!0,initializer:null},c={},Object.keys(s).forEach(function(e){c[e]=s[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=a.slice().reverse().reduce(function(e,t){return t(n,o,e)||e},c),l&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(l):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(n,o,c),c=null),r=c,i)}),define("resources/value-converters/date",["exports","moment"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DateValueConverter=void 0;var i,r=(i=t)&&i.__esModule?i:{default:i};e.DateValueConverter=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.toView=function(e){return(0,r.default)(e).format("MMMM D, YYYY")},e}()}),define("resources/value-converters/formathtml",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.FormatHtmlValueConverter=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.toView=function(e){return e.replace(/(?:\r\n|\r|\n)/g,"<br />")},e}()}),define("resources/value-converters/keys",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.KeysValueConverter=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.toView=function(e){if(e)return Reflect.ownKeys(e)},e}()}),define("shared/layouts/footerlayout",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.FooterLayout=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}}),define("shared/layouts/headerlayout",["exports","aurelia-dependency-injection","aurelia-framework","../state/sharedstate"],function(e,t,i,r){"use strict";var n,o,a,s,l;Object.defineProperty(e,"__esModule",{value:!0}),e.HeaderLayout=void 0;var c,u,d,f,p,h;e.HeaderLayout=(n=(0,t.inject)(r.SharedState),o=(0,i.bindable)({defaultBindingMode:i.bindingMode.twoWay}),n((s=function(){function e(t){var i,r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.activeRoute="",i=this,r="routerConfig",o=this,(n=l)&&Object.defineProperty(i,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0}),this.sharedState=t}return e.prototype.routerConfigChanged=function(e,t){this.activeRoute=e.name},e}(),c=s.prototype,u="routerConfig",d=[o],f={enumerable:!0,initializer:null},h={},Object.keys(f).forEach(function(e){h[e]=f[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=d.slice().reverse().reduce(function(e,t){return t(c,u,e)||e},h),p&&void 0!==h.initializer&&(h.value=h.initializer?h.initializer.call(p):void 0,h.initializer=void 0),void 0===h.initializer&&(Object.defineProperty(c,u,h),h=null),l=h,a=s))||a)}),define("shared/models/user",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.User=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.email="",this.token="",this.username="",this.bio="",this.image=""}}),define("shared/state/sharedstate",["exports","../models/user"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedState=void 0;e.SharedState=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentUser=new t.User,this.isAuthenticated=!1}}),define("shared/services/apiservice",["exports","./config","aurelia-fetch-client","aurelia-dependency-injection","querystringify","./jwtservice","./servicehelper"],function(e,t,i,r,n,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ApiService=void 0;var s,l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(n);e.ApiService=(0,r.inject)(i.HttpClient,o.JwtService)(s=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.http=t,this.jwtService=i}return e.prototype.setHeaders=function(){var e={"Content-Type":"application/json",Accept:"application/json"};return this.jwtService.getToken()&&(e.Authorization="Token "+this.jwtService.getToken()),new Headers(e)},e.prototype.get=function(e,i){var r={method:"GET",headers:this.setHeaders()};return this.http.fetch(""+t.config.api_url+e+"?"+l.stringify(i),r).then(a.status).catch(a.parseError)},e.prototype.put=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={method:"PUT",headers:this.setHeaders(),body:(0,i.json)(r)};return this.http.fetch(""+t.config.api_url+e,n).then(a.status).catch(a.parseError)},e.prototype.post=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={method:"POST",headers:this.setHeaders(),body:(0,i.json)(r)};return this.http.fetch(""+t.config.api_url+e,n).then(a.status).catch(a.parseError)},e.prototype.delete=function(e){var i={method:"DELETE",headers:this.setHeaders()};return this.http.fetch(""+t.config.api_url+e,i).then(a.status).catch(a.parseError)},e}())||s}),define("shared/services/articleservice",["exports","aurelia-dependency-injection","./apiservice"],function(e,t,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.ArticleService=void 0;e.ArticleService=(0,t.inject)(i.ApiService)(r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiService=t}return e.prototype.getList=function(e,t){return this.apiService.get("/articles"+("feed"===e?"/feed":""),t)},e.prototype.get=function(e){return this.apiService.get("/articles/"+e).then(function(e){return e.article})},e.prototype.destroy=function(e){return this.apiService.delete("/articles/"+e)},e.prototype.save=function(e){return e.slug?this.apiService.put("/articles/"+e.slug,{article:e}).then(function(e){return e.article}):this.apiService.post("/articles/",{article:e}).then(function(e){return e.article})},e.prototype.favorite=function(e){return this.apiService.post("/articles/"+e+"/favorite")},e.prototype.unfavorite=function(e){return this.apiService.delete("/articles/"+e+"/favorite")},e}())||r}),define("shared/services/commentservice",["exports","aurelia-dependency-injection","./apiservice"],function(e,t,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.CommentService=void 0;e.CommentService=(0,t.inject)(i.ApiService)(r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiService=t}return e.prototype.add=function(e,t){return this.apiService.post("/articles/"+e+"/comments",{comment:{body:t}}).then(function(e){return e.comment})},e.prototype.getList=function(e){return this.apiService.get("/articles/"+e+"/comments").then(function(e){return e.comments})},e.prototype.destroy=function(e,t){return this.apiService.delete("/articles/"+t+"/comments/"+e)},e}())||r}),define("shared/services/config",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.config={api_url:"https://conduit.productionready.io/api"}}),define("shared/services/jwtservice",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.JwtService=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.getToken=function(){return window.localStorage.jwtToken},e.prototype.saveToken=function(e){window.localStorage.jwtToken=e},e.prototype.destroyToken=function(){window.localStorage.removeItem("jwtToken")},e}()}),define("shared/services/profileservice",["exports","aurelia-dependency-injection","./apiservice"],function(e,t,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileService=void 0;e.ProfileService=(0,t.inject)(i.ApiService)(r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiService=t}return e.prototype.get=function(e){return this.apiService.get("/profiles/"+e).then(function(e){return e.profile})},e.prototype.follow=function(e){return this.apiService.post("/profiles/"+e+"/follow")},e.prototype.unfollow=function(e){return this.apiService.delete("/profiles/"+e+"/follow")},e}())||r}),define("shared/services/servicehelper",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.status=function(e){if(e.status>=200&&e.status<400)return e.json();throw e},e.parseError=function(e){if(!(e instanceof Error))return new Promise(function(t,i){return i(e.json())})}}),define("shared/services/tagservice",["exports","aurelia-dependency-injection","./apiservice"],function(e,t,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.TagService=void 0;e.TagService=(0,t.inject)(i.ApiService)(r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiService=t}return e.prototype.getList=function(){return this.apiService.get("/tags").then(function(e){return e.tags})},e}())||r}),define("shared/services/userservice",["exports","aurelia-dependency-injection","./apiservice","./jwtservice","../models/user","../state/sharedstate"],function(e,t,i,r,n,o){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.UserService=void 0;e.UserService=(0,t.inject)(i.ApiService,r.JwtService,o.SharedState)(a=function(){function e(t,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiService=t,this.jwtService=i,this.sharedState=r}return e.prototype.populate=function(){var e=this;this.jwtService.getToken()?this.apiService.get("/user").then(function(t){return e.setAuth(t.user)}):this.purgeAuth()},e.prototype.setAuth=function(e){this.jwtService.saveToken(e.token),this.sharedState.currentUser=e,this.sharedState.isAuthenticated=!0},e.prototype.purgeAuth=function(){this.jwtService.destroyToken(),this.sharedState.currentUser=new n.User,this.sharedState.isAuthenticated=!1},e.prototype.attemptAuth=function(e,t){var i=this,r="login"===e?"/login":"";return this.apiService.post("/users"+r,{user:t}).then(function(e){return i.setAuth(e.user),e})},e.prototype.update=function(e){var t=this;return this.apiService.put("/user",{user:e}).then(function(e){return t.sharedState.currentUser=e.user,e.user})},e}())||a}),define("text!app.html",["module"],function(e){e.exports='<template><require from="./shared/layouts/headerlayout"></require><require from="./shared/layouts/footerlayout"></require><header-layout router-config.bind="router.currentInstruction.config"></header-layout><router-view></router-view><footer-layout></footer-layout></template>'}),define("text!components/article/articlecomponent.html",["module"],function(e){e.exports='<template><require from="./comment"></require><require from="../../resources/value-converters/formathtml"></require><div class="article-page"><div class="banner"><div class="container"><h1>${article.title}</h1><div class="article-meta"><a route-href="route: profile; params.bind: {name: article.author.username}"><img src.bind="article.author.image"></a><div class="info"><a route-href="route: profile; params.bind: {name: article.author.username}" class="author">${article.author.username}</a><span class="date">${article.createdAt | date}</span></div><span if.bind="canModify"><a class="btn btn-outline-secondary btn-sm" route-href="route: editor; params.bind: {slug: article.slug}"><i class="ion-edit"></i>&nbsp;Edit Article </a>&nbsp;&nbsp; <button class="btn btn-outline-danger btn-sm" click.delegate="deleteArticle()"><i class="ion-trash-a"></i>&nbsp;Delete Article</button> </span><span if.bind="!canModify"><button class="btn btn-sm btn-outline-secondary" click.delegate="onToggleFollowing()"><i class="ion-plus-round"></i> &nbsp; ${article.author.following ? \'Unfollow\' : \'Follow\'} ${article.author.username} </button> &nbsp;&nbsp; <button class="btn btn-sm btn-outline-primary" click.delegate="onToggleFavorited()"><i class="ion-heart"></i> &nbsp; ${article.favorited ? \'Unfavorite\' : \'Favorite\'} Post <span class="counter">(${article.favoritesCount})</span></button></span></div></div></div><div class="container page"><div class="row article-content"><div class="col-md-12"><div innerhtml.bind="article.body | formatHtml"></div></div></div><hr><div class="article-actions"><div class="article-meta"><a route-href="route: profile; params.bind: {name: article.author.username}"><img src.bind="article.author.image"></a><div class="info"><a route-href="route: profile; params.bind: {name: article.author.username}" class="author">${article.author.username}</a><span class="date">${article.createdAt | date}</span></div><span if.bind="canModify"><a class="btn btn-outline-secondary btn-sm" route-href="route: editor; params.bind: {slug: article.slug}"><i class="ion-edit"></i>&nbsp;Edit Article </a>&nbsp;&nbsp; <button class="btn btn-outline-danger btn-sm" click.delegate="deleteArticle()"><i class="ion-trash-a"></i>&nbsp;Delete Article</button> </span><span if.bind="!canModify"><button class="btn btn-sm btn-outline-secondary" click.delegate="onToggleFollowing()"><i class="ion-plus-round"></i> &nbsp; ${article.author.following ? \'Unfollow\' : \'Follow\'} ${article.author.username} </button> &nbsp;&nbsp; <button class="btn btn-sm btn-outline-primary" click.delegate="onToggleFavorited()"><i class="ion-heart"></i> &nbsp; ${article.favorited ? \'Unfavorite\' : \'Favorite\'} Post <span class="counter">(${article.favoritesCount})</span></button></span></div></div><div class="row"><div class="col-xs-12 col-md-8 offset-md-2"><form class="card comment-form" if.bind="sharedState.isAuthenticated"><div class="card-block"><textarea class="form-control" placeholder="Write a comment..." rows="3" value.bind="myComment"></textarea></div><div class="card-footer"><img src.bind="sharedState.currentUser.image" class="comment-author-img"> <button class="btn btn-sm btn-primary" click.delegate="postComment()">Post Comment</button></div></form><comment repeat.for="comment of comments" comment.bind="comment" delete-cb.call="deleteComment(commentId)"></comment></div></div></div></div></template>'}),define("text!components/article/comment.html",["module"],function(e){e.exports='<template><div class="card"><div class="card-block"><p class="card-text">${comment.body}</p></div><div class="card-footer"><a route-href="route: profile; params.bind: {name: comment.author.username}" class="comment-author"><img src.bind="comment.author.image" class="comment-author-img"> </a>&nbsp; <a route-href="route: profile; params.bind: {name: comment.author.username}" class="comment-author">${comment.author.username}</a><span class="date-posted">${comment.createdAt | date}</span><span class="mod-options" if.bind="canModify"><i class="ion-trash-a" click.delegate="deleteCb({commentId: comment.id})"></i></span></div></div></template>'}),define("text!components/auth/authcomponent.html",["module"],function(e){e.exports='<template><require from="../../resources/value-converters/keys"></require><div class="auth-page"><div class="container page"><div class="row"><div class="col-md-6 offset-md-3 col-xs-12"><h1 class="text-xs-center">Sign ${type === \'login\' ? \'in\' : \'up\'}</h1><p class="text-xs-center"><a route-href="route: login" if.bind="type === \'register\'">Have an account?</a> <a route-href="route: register" if.bind="type === \'login\'">Need an account?</a></p><ul class="error-messages" if.bind="controller.errors"><li repeat.for="error of controller.errors"> ${error.message} </li></ul><ul class="error-messages"><li repeat.for="key of errors | keys">${key}&nbsp;${errors[key]}</li></ul><form><fieldset class="form-group" if.bind="type === \'register\'"><input class="form-control form-control-lg" type="text" placeholder="Your Name" value.bind="username & validate"></fieldset><fieldset class="form-group"><input class="form-control form-control-lg" type="text" placeholder="Email" value.bind="email & validate"></fieldset><fieldset class="form-group"><input class="form-control form-control-lg" type="password" placeholder="Password" value.bind="password & validate"></fieldset><button class="btn btn-lg btn-primary pull-xs-right" click.trigger="submit()" disabled.bind="!canSave">Sign ${type === \'login\' ? \'in\' : \'up\'} </button></form></div></div></div></div></template>'}),define("text!components/editor/editorcomponent.html",["module"],function(e){e.exports='<template><div class="editor-page"><div class="container page"><div class="row"><div class="col-md-10 offset-md-1 col-xs-12"><form><fieldset><fieldset class="form-group"><input type="text" class="form-control form-control-lg" placeholder="Article Title" value.bind="article.title"></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="What\'s this article about?" value.bind="article.description"></fieldset><fieldset class="form-group"><textarea class="form-control" rows="8" placeholder="Write your article (in markdown)" value.bind="article.body"></textarea></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="Enter tags" value.bind="tag & updateTrigger:\'blur\'"><div class="tag-list"><span repeat.for="tag of article.tagList" class="tag-default tag-pill"><i class="ion-close-round" click.delegate="removeTag(tag)"></i> ${tag}</span></div></fieldset><button class="btn btn-lg pull-xs-right btn-primary" type="button" click.delegate="publishArticle()">Publish Article</button></fieldset></form></div></div></div></div></template>'}),define("text!components/home/homecomponent.html",["module"],function(e){e.exports='<template><require from="../../resources/elements/articlelist"></require><div class="home-page"><div class="banner"><div class="container"><h1 class="logo-font">conduit</h1><p>A place to share your knowledge.</p></div></div><div class="container page"><div class="row"><div class="col-md-9"><div class="feed-toggle"><ul class="nav nav-pills outline-active"><li class="nav-item"><a class="nav-link ${sharedState.isAuthenticated ? \'\' : \'disabled\'} ${shownList === \'feed\' ? \' active\' : \'\'}" click.delegate="setListTo(\'feed\')">Your Feed</a></li><li class="nav-item"><a class="nav-link" class.bind="shownList === \'all\' ? \'active\' : \'\'" click.delegate="setListTo(\'all\')">Global Feed</a></li></ul></div><article-list articles.bind="articles" total-pages.bind="totalPages" page-number.bind="pageNumber" current-page.bind="currentPage" set-page-cb.call="setPageTo(pageNumber)"></article-list></div><div class="col-md-3"><div class="sidebar"><p>Popular Tags</p><div class="tag-list"><a repeat.for="tag of tags" href="#" class="tag-pill tag-default" click.delegate="setListTo(\'all\', tag)">${tag}</a><div show.bind="tags.length === 0">No tags are here... yet.</div></div></div></div></div></div></div></template>'}),define("text!components/profile/profilearticlecomponent.html",["module"],function(e){e.exports='<template><require from="../../resources/elements/articlelist"></require><article-list articles.bind="articles" total-pages.bind="totalPages" page-number.bind="pageNumber" current-page.bind="currentPage" set-page-cb.call="setPageTo(pageNumber)"></article-list></template>'}),define("text!components/profile/profilecomponent.html",["module"],function(e){e.exports='<template><div class="profile-page"><div class="user-info"><div class="container"><div class="row"><div class="col-xs-12 col-md-10 offset-md-1"><img src.bind="profile.image" class="user-img"><h4>${profile.username}</h4><p>${profile.bio}</p><button class="btn btn-sm btn-outline-secondary action-btn" if.bind="!isUser" click.delegate="onToggleFollowing()"><i class="ion-plus-round"></i> &nbsp; ${profile.following ? \'Unfollow\' : \'Follow\'} ${profile.username} </button> <a route-href="route: settings" class="btn btn-sm btn-outline-secondary action-btn" if.bind="isUser"><i class="ion-gear-a"></i> Edit Profile Settings</a></div></div></div></div><div class="container"><div class="row"><div class="col-xs-12 col-md-10 offset-md-1"><div class="articles-toggle"><ul class="nav nav-pills outline-active"><li class="nav-item"><a class="nav-link ${router.currentInstruction.config.name !== \'profilefavorites\' ? \'active\' : \'\'}" route-href="route: profilearticle">My Posts</a></li><li class="nav-item"><a class="nav-link ${router.currentInstruction.config.name === \'profilefavorites\' ? \'active\' : \'\'}" route-href="route: profilefavorites">Favorited Posts</a></li></ul></div><router-view></router-view></div></div></div></div></template>'}),define("text!components/profile/profilefavoritescomponent.html",["module"],function(e){e.exports='<template><require from="../../resources/elements/articlelist"></require><article-list articles.bind="articles" total-pages.bind="totalPages" page-number.bind="pageNumber" current-page.bind="currentPage" set-page-cb.call="setPageTo(pageNumber)"></article-list></template>'}),define("text!components/settings/settingscomponent.html",["module"],function(e){e.exports='<template><div class="settings-page"><div class="container page"><div class="row"><div class="col-md-6 offset-md-3 col-xs-12"><h1 class="text-xs-center">Your Settings</h1><form><fieldset><fieldset class="form-group"><input class="form-control" type="text" placeholder="URL of profile picture" value.bind="sharedState.currentUser.image"></fieldset><fieldset class="form-group"><input class="form-control form-control-lg" type="text" placeholder="Your Name" value.bind="sharedState.currentUser.username"></fieldset><fieldset class="form-group"><textarea class="form-control form-control-lg" rows="8" placeholder="Short bio about you" value.bind="sharedState.currentUser.bio"></textarea></fieldset><fieldset class="form-group"><input class="form-control form-control-lg" type="text" placeholder="Email" value.bind="sharedState.currentUser.email"></fieldset><fieldset class="form-group"><input class="form-control form-control-lg" type="password" placeholder="Password" value.bind="sharedState.currentUser.password"></fieldset><button class="btn btn-lg btn-primary pull-xs-right" click.delegate="update()">Update Settings</button></fieldset></form><hr><button class="btn btn-outline-danger" click.delegate="logout()">Or click here to logout.</button></div></div></div></div></template>'}),define("text!resources/elements/articlelist.html",["module"],function(e){e.exports='<template><require from="./articlepreview"></require><div class="article-preview" show.bind="articles.length === 0">No articles are here... yet.</div><article-preview repeat.for="article of articles" article.bind="article"></article-preview><nav show.bind="totalPages.length > 1"><ul class="pagination"><li class="page-item" class="${pageNumber === currentPage ? \'active\' : \'\'}" repeat.for="pageNumber of totalPages" click.delegate="setPageCb({pageNumber: pageNumber})"><a class="page-link" href="#">${pageNumber}</a></li></ul></nav></template>'}),define("text!resources/elements/articlepreview.html",["module"],function(e){e.exports='<template><div class="article-preview"><div class="article-meta"><a route-href="route: profile; params.bind: {name: article.author.username}"><img src.bind="article.author.image"></a><div class="info"><a route-href="route: profile; params.bind: {name: article.author.username}" class="author"> ${article.author.username}</a><span class="date">${article.createdAt | date}</span></div><button class="btn btn-outline-primary btn-sm pull-xs-right"><i class="ion-heart"></i> ${article.favoritesCount} </button></div><a route-href="route: article; params.bind: { slug: article.slug }" class="preview-link"><h1>${article.title}</h1><p>${article.description}</p><span>Read more...</span><ul class="tag-list"><li repeat.for="tag of article.tagList" class="tag-default tag-pill tag-outline">${tag}</li></ul></a></div></template>'}),define("text!shared/layouts/footerlayout.html",["module"],function(e){e.exports='<template><footer><div class="container"><a href="/" class="logo-font">conduit</a> <span class="attribution">An interactive learning project from <a href="https://thinkster.io">Thinkster</a>. Code &amp; design licensed under MIT.</span></div></footer></template>'}),define("text!shared/layouts/headerlayout.html",["module"],function(e){e.exports='<template><nav class="navbar navbar-light"><div class="container"><a class="navbar-brand" route-href="route: home">conduit</a><ul class="nav navbar-nav pull-xs-right"><li class="${\'nav-item\' + (activeRoute === \'home\' ? \' active\' : \'\')}"><a class="nav-link" route-href="route: home">Home</a></li><li class="${\'nav-item\' + (activeRoute === \'create\' ? \' active\' : \'\')}" show.bind="sharedState.currentUser && sharedState.isAuthenticated"><a class="nav-link" route-href="route: editor"><i class="ion-compose"></i>&nbsp;New Post</a></li><li class="${\'nav-item\' + (activeRoute === \'settings\' ? \' active\' : \'\')}" show.bind="sharedState.currentUser && sharedState.isAuthenticated"><a class="nav-link" route-href="route: settings"><i class="ion-gear-a"></i>&nbsp;Settings</a></li><li class="${\'nav-item\' + (activeRoute === \'login\' ? \' active\' : \'\')}" show.bind="!sharedState.isAuthenticated"><a class="nav-link" route-href="route: login">Sign in</a></li><li class="${\'nav-item\' + (activeRoute === \'register\' ? \' active\' : \'\')}" show.bind="!sharedState.isAuthenticated"><a class="nav-link" route-href="route: register">Sign up</a></li><li class="${\'nav-item\' + (activeRoute === \'profile\' ? \' active\' : \'\')}" show.bind="sharedState.currentUser && sharedState.isAuthenticated"><a class="nav-link" route-href="route: profile; params.bind: {name: sharedState.currentUser.username}">${sharedState.currentUser.username}</a></li></ul></div></nav></template>'});